"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8005],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(n),c=i,u=m["".concat(l,".").concat(c)]||m[c]||h[c]||r;return n?a.createElement(u,o(o({ref:t},d),{},{components:n})):a.createElement(u,o({ref:t},d))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1497:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:5},o="What can be serialized?",s={unversionedId:"Getting started/Serializable_data",id:"Getting started/Serializable_data",title:"What can be serialized?",description:"We will now talk about the types of data that can be serialized with Persyst, and whether they are serialized as values or references.",source:"@site/docs/Getting started/Serializable_data.md",sourceDirName:"Getting started",slug:"/Getting started/Serializable_data",permalink:"/persyst-docs/Getting started/Serializable_data",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Script annotation",permalink:"/persyst-docs/Getting started/Script_annotation"},next:{title:"Serializing references",permalink:"/persyst-docs/Getting started/serializing_references"}},l={},p=[{value:"Where can the serialized data be?",id:"where-can-the-serialized-data-be",level:2}],d={toc:p};function h(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"what-can-be-serialized"},"What can be serialized?"),(0,i.kt)("p",null,"We will now talk about the types of data that can be serialized with Persyst, and whether they are ",(0,i.kt)("a",{parentName:"p",href:"Fundamentals_of_serialization"},"serialized as values or references"),"."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Please keep in mind that the point of Persyst is to serialize ",(0,i.kt)("em",{parentName:"p"},"runtime")," data. It does not ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"replace"))," Unity's built-in serialization. In fact, it handles an entirely separate task that Unity's serialization simply does not do. What that means is that some of the limitations we are about to discuss are way less important than they might initially seem. "),(0,i.kt)("p",{parentName:"admonition"},"For example, not being able to serialize a reference to an AudioClip with Persyst is fairly irrelevant, as you are probably going to be assigning that reference in the Unity Editor, and using Unity's serialization for that.")),(0,i.kt)("p",null,"All primitive datatypes (",(0,i.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"string"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bool"),") are serializable with Persyst, and will be serialized as ",(0,i.kt)("strong",{parentName:"p"},"values"),"."),(0,i.kt)("p",null,"References to ",(0,i.kt)("inlineCode",{parentName:"p"},"GameObjects"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Components"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"Scriptable Objects"),"can be serialized, and will be serialized as ",(0,i.kt)("strong",{parentName:"p"},"references"),". See ",(0,i.kt)("a",{parentName:"p",href:"serializing_references"},"serializing references")," for details.\nOther ",(0,i.kt)("inlineCode",{parentName:"p"},"UnityEngine.Objects")," (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioClip"),") are currently not supported. "),(0,i.kt)("p",null,"Instances of objects that do not inherit from ",(0,i.kt)("inlineCode",{parentName:"p"},"UnityEngine.Object")," can be serialized, but only as ",(0,i.kt)("strong",{parentName:"p"},"values"),". Unless you are willing to put in ",(0,i.kt)("a",{parentName:"p",href:"/Know_more/Referencing_everything"},"some extra work"),"."),(0,i.kt)("p",null,"Collections can be serialized, but they are kind of ",(0,i.kt)("a",{parentName:"p",href:"/Know_more/Collections"},"a long story"),"."),(0,i.kt)("p",null,"You can serialize any instance ",(0,i.kt)("inlineCode",{parentName:"p"},"Fields"),". You can also serialize ",(0,i.kt)("inlineCode",{parentName:"p"},"Properties"),", as long as they have both a ",(0,i.kt)("inlineCode",{parentName:"p"},"getter")," and a ",(0,i.kt)("inlineCode",{parentName:"p"},"setter"),". Visibility (",(0,i.kt)("inlineCode",{parentName:"p"},"public"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"private"),", etc.) is irrelevant. "),(0,i.kt)("p",null,"There is currently no way to serialize ",(0,i.kt)("inlineCode",{parentName:"p"},"static")," members. Sorry. This might change in the future, but for now , depending on what you are using the static members for, you might be able to get around this by using a ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Singleton_pattern"},"Singleton"),' instead to hold information that needs to be accesible from multiple instances. Although "best practices" people seem to hate singletons now for some reason, so you be the judge.'),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"You can serialize the same member with both Persyst and the Unity serialization system, and that will work just fine. In fact, this is a very common thing to do. "),(0,i.kt)("p",{parentName:"admonition"},'Usually, you want to use Unity\'s serialization to set the "default value" of something ',"\u2014","the value that it will have when you start a new game, or when you reach a certain level for the first time","\u2014"," in the editor. Then, you use Persyst to update the value as it's changed during playing."),(0,i.kt)("p",{parentName:"admonition"},"Of course, when both serialized values exist, Persyst wins, as loading the save file data happens ",(0,i.kt)("strong",{parentName:"p"},"after"),' the object is loaded into the scene, and thus the "default value" assigned by Unity\'s serialization is then overwritten by Persyst.')),(0,i.kt)("h2",{id:"where-can-the-serialized-data-be"},"Where can the serialized data be?"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviours")," that implement ",(0,i.kt)("inlineCode",{parentName:"p"},"ISaveable"),". That's it."),(0,i.kt)("p",null,'Wait, wait! I can already hear you yelling "Is there no way to serialize the values of other components? Can I not store the position of a ',(0,i.kt)("inlineCode",{parentName:"p"},"Transform"),'? This plugin is useless!".'),(0,i.kt)("p",null,"But here's the thing. You actually ",(0,i.kt)("strong",{parentName:"p"},"can")," store it. Because the question of ",(0,i.kt)("em",{parentName:"p"},"where")," the data is... well, it's a matter of perspective, really."),(0,i.kt)("p",null,"Take this property, as an example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[SaveThis] Vector3 position{\n    get{return transform.position;}\n    set{transform.position = value;}\n}\n")),(0,i.kt)("p",null,"Well, the data is ",(0,i.kt)("em",{parentName:"p"},"really")," stored in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Transform")," component... but the property's right here, in my conveniently serializable ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour"),". And the property lets me ",(0,i.kt)("inlineCode",{parentName:"p"},"get")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"set")," the data. So, in a way, it's as if the data was here, isn't it?"),(0,i.kt)("p",null,"Eh, that argument might not convince ",(0,i.kt)("strong",{parentName:"p"},"you"),", but it does convince the C# Reflection system, whose opinion somewhat is more important for getting Persyst to work. "),(0,i.kt)("p",null,"So, if you add that code to your ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour"),", the position of the object will be saved and loaded automatically."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Just to be clear, this does not mean you now need to always access transform.position though this property. You can keep using it as you always have. This property is only important because having something be inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour")," means the ",(0,i.kt)("inlineCode",{parentName:"p"},"PersistentObject")," can see it.")),(0,i.kt)("p",null,"Alternatively, instead of adding the property to a ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour")," that is already handling other game logic, you could have a completely separate ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour")," component whose whole job is to contain this property. And that works! In fact, that is exactly what the ",(0,i.kt)("a",{parentName:"p",href:"/"},"Transform Saver")," component, which you can find in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Utils")," directory, does."),(0,i.kt)("p",null,"Hopefully you can see that this is not because of some special quirk of ",(0,i.kt)("inlineCode",{parentName:"p"},"Transforms"),", but rather it is a trick that we can use for everything. Any value on any other ",(0,i.kt)("inlineCode",{parentName:"p"},"Component")," (",(0,i.kt)("inlineCode",{parentName:"p"},"Colliders"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Rigidbodies"),") that you can ",(0,i.kt)("inlineCode",{parentName:"p"},"set")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"get")," from your ",(0,i.kt)("inlineCode",{parentName:"p"},"MonoBehaviour")," can get the same treatment."),(0,i.kt)("p",null,"..."),(0,i.kt)("p",null,"And how about serializing members of other ",(0,i.kt)("inlineCode",{parentName:"p"},"Components")," that can only be ",(0,i.kt)("inlineCode",{parentName:"p"},"set")," privately? Well... few things are impossible if you are ",(0,i.kt)("a",{parentName:"p",href:"/Know_more/Abusing_reflection"},"really bold"),"."))}h.isMDXComponent=!0}}]);